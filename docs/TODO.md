# My Trip - 개발 TODO 리스트

> PRD, Flowchart, Design 문서 기반 작업 항목 정리

## Phase 1: 기본 구조 & 공통 설정

- [x] 프로젝트 셋업
  - [ ] 환경변수 설정 (`.env`)
    - [ ] `.env` 파일 생성 또는 확인
    - [ ] 한국관광공사 API 키 설정
      - [ ] `NEXT_PUBLIC_TOUR_API_KEY` - 클라이언트 사이드용 (필수)
      - [ ] `TOUR_API_KEY` - 서버 사이드용 (선택, 없으면 NEXT_PUBLIC_TOUR_API_KEY 사용)
      - [ ] API 키 발급 방법: https://www.data.go.kr/data/15101578/openapi.do
    - [ ] 네이버 지도 클라이언트 ID 설정
      - [ ] `NEXT_PUBLIC_NAVER_MAP_CLIENT_ID` - 네이버 클라우드 플랫폼 Maps API 키
      - [ ] 발급 방법: https://www.ncloud.com/product/applicationService/maps
    - [ ] Clerk 인증 키 확인
      - [ ] `NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY` - 클라이언트용
      - [ ] `CLERK_SECRET_KEY` - 서버용
    - [ ] Supabase 키 확인
      - [ ] `NEXT_PUBLIC_SUPABASE_URL` - Supabase 프로젝트 URL
      - [ ] `NEXT_PUBLIC_SUPABASE_ANON_KEY` - Anon 공개 키
      - [ ] `SUPABASE_SERVICE_ROLE_KEY` - Service Role 키 (서버 전용)
    - [ ] 환경변수 설정 확인 방법
      ```bash
      # 개발 서버 재시작 후 환경변수 로드 확인
      pnpm dev
      # 또는 환경변수 직접 확인 (개발 환경)
      node -e "console.log(process.env.NEXT_PUBLIC_TOUR_API_KEY)"
      ```
- [x] API 클라이언트 구현

  - [x] `lib/api/tour-api.ts` 생성 완료
    - [x] `getAreaCode()` - 지역코드 조회 (`areaCode2`)
      - [x] 상위 지역 코드 파라미터 지원 (시/도 > 시/군/구)
      - [x] 응답 데이터 정규화 (단일/배열 처리)
    - [x] `getAreaBasedList()` - 지역 기반 목록 (`areaBasedList2`)
      - [x] 지역 코드, 콘텐츠 타입 ID 필터링
      - [x] 페이지네이션 지원 (numOfRows, pageNo)
      - [x] 목록/개수만 조회 옵션 (listYN)
    - [x] `searchKeyword()` - 키워드 검색 (`searchKeyword2`)
      - [x] 키워드 필수 검증
      - [x] 지역/타입 필터 옵션
      - [x] 페이지네이션 지원
    - [x] `getDetailCommon()` - 공통 정보 (`detailCommon2`)
      - [x] 상세 정보 포함 옵션 (이미지, 주소, 지도, 개요 등)
      - [x] 단일 항목 반환 처리
    - [x] `getDetailIntro()` - 소개 정보 (`detailIntro2`)
      - [x] 콘텐츠 ID 및 타입 ID 필수
      - [x] 운영 정보 반환
    - [x] `getDetailImage()` - 이미지 목록 (`detailImage2`)
      - [x] 원본/서브 이미지 옵션
      - [x] 이미지 목록 배열 반환
    - [x] `getDetailPetTour()` - 반려동물 정보 (`detailPetTour2`)
      - [x] 반려동물 동반 정보 조회
    - [x] 공통 파라미터 처리
      - [x] `getApiKey()` - 서버/클라이언트 환경변수 자동 선택
      - [x] `buildApiUrl()` - 공통 파라미터 자동 추가 (MobileOS, MobileApp, \_type)
      - [x] Base URL 설정: `https://apis.data.go.kr/B551011/KorService2`
    - [x] 에러 처리 및 재시도 로직
      - [x] `fetchWithRetry()` - 최대 3회 재시도
      - [x] 지수 백오프 (exponential backoff) 적용
      - [x] API 응답 에러 코드 처리 (resultCode !== "0000")
      - [x] 네트워크 에러 처리
      - [x] 환경변수 누락 에러 처리
    - [x] 응답 데이터 정규화
      - [x] `normalizeItems()` - 단일 항목을 배열로 변환
      - [x] API 응답 구조 파싱 (response.body.items.item)
  - [x] API 클라이언트 테스트 방법

    - [ ] Server Component에서 테스트

      ```ts
      // app/test-api/page.tsx
      import { getAreaCode } from "@/lib/api/tour-api";

      export default async function TestPage() {
        const codes = await getAreaCode();
        return <pre>{JSON.stringify(codes, null, 2)}</pre>;
      }
      ```

    - [ ] Server Action에서 테스트
    - [ ] API Route에서 테스트

- [x] 타입 정의
  - [x] `lib/types/tour.ts` 생성 완료
    - [x] `TourItem` 인터페이스 (목록)
      - [x] 필수 필드: addr1, areacode, contentid, contenttypeid, title, mapx, mapy, modifiedtime
      - [x] 옵셔널 필드: addr2, firstimage, firstimage2, tel, cat1, cat2, cat3
    - [x] `TourDetail` 인터페이스 (상세)
      - [x] 필수 필드: contentid, contenttypeid, title, addr1, mapx, mapy
      - [x] 옵셔널 필드: addr2, zipcode, tel, homepage, overview, firstimage, firstimage2
    - [x] `TourIntro` 인터페이스 (운영정보)
      - [x] 공통 필드: contentid, contenttypeid
      - [x] 타입별 다양한 필드 (usetime, restdate, parking, chkpet 등)
    - [x] `TourImage` 인터페이스 (이미지)
      - [x] contentid, originimgurl (필수)
      - [x] smallimageurl, imgname, serialnum (옵션)
    - [x] `PetTourInfo` 인터페이스 (반려동물)
      - [x] contentid, contenttypeid (필수)
      - [x] chkpetleash, chkpetsize, chkpetplace, chkpetfee, petinfo, parking (옵션)
    - [x] `AreaCode` 인터페이스 (지역코드)
      - [x] code, name (필수)
      - [x] rnum (옵션, 상위 지역코드)
    - [x] API 응답 래퍼 타입
      - [x] `ApiResponseHeader` - 결과 코드 및 메시지
      - [x] `ApiResponseBody<T>` - 응답 본문 (items, totalCount 등)
      - [x] `ApiResponse<T>` - 전체 응답 구조
      - [x] 각 API별 응답 타입: `AreaCodeResponse`, `AreaBasedListResponse`, `SearchKeywordResponse`, `DetailCommonResponse`, `DetailIntroResponse`, `DetailImageResponse`, `DetailPetTourResponse`
    - [x] Content Type ID 상수
      - [x] `CONTENT_TYPE` 객체 - 관광지(12), 문화시설(14), 축제(15), 여행코스(25), 레포츠(28), 숙박(32), 쇼핑(38), 음식점(39)
      - [x] `ContentTypeId` 타입 정의
  - [ ] `lib/types/stats.ts` 생성 (Phase 4에서 구현 예정)
    - [ ] `RegionStats` 인터페이스
    - [ ] `TypeStats` 인터페이스
    - [ ] `StatsSummary` 인터페이스
- [x] 레이아웃 구조
  - [x] `app/layout.tsx` 업데이트
    - [x] 메타데이터 설정 (My Trip 프로젝트에 맞게 업데이트)
    - [x] Open Graph 메타태그 추가
    - [x] ThemeProvider 추가 (다크/라이트 모드 지원)
    - [x] Toaster 컴포넌트 추가
    - [x] suppressHydrationWarning 추가 (hydration 에러 해결)
  - [x] `components/Navbar.tsx` 업데이트
    - [x] 로고 "My Trip"으로 변경 (그라디언트 스타일)
    - [x] 네비게이션 링크 추가 (홈, 통계, 북마크)
    - [x] 북마크 링크는 로그인한 사용자에게만 표시
    - [x] 반응형 디자인 (모바일: 햄버거 메뉴, 데스크톱: 가로 메뉴)
    - [x] 현재 경로 활성 링크 표시
    - [x] lucide-react 아이콘 사용
    - [x] 로그인/사용자 메뉴 (Clerk)
- [x] 공통 컴포넌트
  - [x] `components/ui/loading.tsx` - 로딩 스피너
    - [x] Loader2 아이콘 사용
    - [x] 크기 변형 지원 (sm, md, lg)
    - [x] PageLoading 컴포넌트 포함
  - [x] `components/ui/skeleton.tsx` - 스켈레톤 UI (shadcn/ui 설치 완료)
  - [x] `components/ui/error.tsx` - 에러 메시지
    - [x] 재시도 버튼 지원
    - [x] 에러 타입별 메시지 처리
    - [x] InlineError 컴포넌트 포함
  - [x] `components/ui/toast.tsx` - 토스트 알림 (shadcn/ui sonner 설치 완료)
    - [x] Toaster 컴포넌트를 layout.tsx에 추가
    - [x] ThemeProvider 연동 완료

## Phase 2: 홈페이지 (`/`) - 관광지 목록

- [x] 페이지 기본 구조
  - [x] `app/page.tsx` 생성
    - [x] 기본 레이아웃 (헤더, 메인, 푸터)
    - [x] 반응형 컨테이너 설정

---

### 추가 개발

- [x] `app/page.tsx` 상세 구현
  - [x] 기본 레이아웃 (Hero Section, Main Content Area, Footer)
  - [x] Hero Section 추가 ("한국의 아름다운 관광지를 탐험하세요")
    - [x] DESIGN.md 타이포그래피 적용 (`text-4xl md:text-5xl font-bold`)
    - [x] DESIGN.md 간격 시스템 적용 (`py-12 md:py-16`)
    - [x] 서브 텍스트 및 설명 추가
  - [x] Main Content Area Placeholder 추가
    - [x] 필터 영역 Placeholder
    - [x] 콘텐츠 영역 Placeholder (관광지 목록 표시 예정)
  - [x] 반응형 컨테이너 설정 (`max-w-7xl mx-auto px-4`)
  - [x] DESIGN.md 디자인 시스템 반영 (타이포그래피, 간격, 컬러)
- [x] `components/Footer.tsx` 생성
  - [x] 저작권 표시 ("My Trip © 2025") - 동적 연도 계산
  - [x] API 제공 안내 ("한국관광공사 API 제공")
  - [x] 반응형 디자인 (모바일: 세로 정렬, 데스크톱: 가로 정렬)
  - [x] DESIGN.md 디자인 시스템 반영
    - [x] 컬러: `text-muted-foreground`, `bg-background`, `border-border`
    - [x] 타이포그래피: `text-sm` (DESIGN.md Small)
    - [x] 간격: `py-8` (모바일), `py-12` (데스크톱)
  - [x] 다크/라이트 모드 지원 (shadcn/ui 테마)
  - [x] 구분선: `border-t border-border`
  - [x] About, Contact 링크 영역 준비 (향후 구현 가능)
- [x] 관광지 목록 기능 (MVP 2.1)
  - [x] `components/tour-card.tsx` 생성
    - [x] 썸네일 이미지 (기본 이미지 fallback)
    - [x] 관광지명
    - [x] 주소 표시
    - [x] 관광 타입 뱃지
    - [ ] 간단한 개요 (1-2줄) - 상세 페이지에서만 제공 예정
    - [x] 호버 효과 (scale, shadow)
    - [x] 클릭 시 상세페이지 이동
  - [x] `components/tour-list.tsx` 생성
    - [x] 그리드 레이아웃 (반응형)
    - [x] 카드 목록 표시
    - [x] 로딩 상태 (Skeleton UI)
    - [x] 빈 상태 처리
  - [x] API 연동
    - [x] `getAreaBasedList()` 호출
    - [x] 데이터 파싱 및 표시
    - [x] 에러 처리

---

### 추가 개발

- [x] `components/tour-card.tsx` 상세 구현
  - [x] Client Component로 구현 (`"use client"`)
  - [x] 이미지 에러 처리 (`useState` + `onError` 핸들러)
  - [x] Hydration 문제 해결 (Next.js Image → 일반 img 태그)
  - [x] 이미지 없을 경우 플레이스홀더 표시 (MapPin 아이콘)
  - [x] 텍스트 오버플로우 처리 (관광지명: `line-clamp-2`, 주소: `whitespace-nowrap`)
  - [x] Content Type ID를 한글 이름으로 변환 함수 구현
  - [x] 접근성 개선 (ARIA 라벨 추가)
- [x] `components/tour-list.tsx` 상세 구현
  - [x] 에러 상태 처리 (`Error` 컴포넌트 사용)
  - [x] 빈 상태 UI 개선 (MapPin 아이콘 + 메시지)
  - [x] 스켈레톤 UI 구조 (이미지 + 제목 + 주소 + 뱃지 영역)
- [x] `app/page.tsx` API 연동 상세
  - [x] Server Component에서 `getAreaBasedList()` 호출
  - [x] 초기 파라미터 설정 (`numOfRows: 20`, `pageNo: 1`)
  - [x] 에러 처리 (try-catch)
  - [x] TourList 컴포넌트에 데이터 전달
- [x] 이미지 및 스타일 설정
  - [x] `next.config.ts`에 한국관광공사 이미지 도메인 추가
    - [x] `api.visitkorea.or.kr`
    - [x] `tong.visitkorea.or.kr`
    - [x] `www.visitkorea.or.kr`
  - [x] `app/globals.css`에 `line-clamp` 유틸리티 클래스 추가 (`line-clamp-1`, `line-clamp-2`)
  - [x] API 클라이언트 개선
  - [x] `listYN` 파라미터 제거 (한국관광공사 API에서 지원하지 않음)
  - [x] 에러 응답 구조 처리 개선 (에러 응답과 정상 응답 구분)
- [x] 필터 기능
  - [x] `components/tour-filters.tsx` 생성
    - [x] 지역 필터 (시/도 선택)
      - [x] `getAreaCode()` API로 지역 목록 로드
      - [x] shadcn/ui Select 드롭다운 사용
      - [x] "전체" 옵션 ("all" 값 사용)
    - [x] 관광 타입 필터
      - [x] 관광지(12), 문화시설(14), 축제/행사(15), 여행코스(25), 레포츠(28), 숙박(32), 쇼핑(38), 음식점(39)
      - [x] 단일 선택 (Select 드롭다운)
      - [x] "전체" 옵션 ("all" 값 사용)
    - [ ] 반려동물 동반 가능 필터 (MVP 2.5)
      - [ ] 토글 버튼
      - [ ] 크기별 필터 (소형, 중형, 대형)
    - [x] 정렬 옵션
      - [x] 최신순 (modifiedtime DESC)
      - [x] 이름순 (title ASC - 가나다순)
    - [x] 필터 상태 관리 (URL 쿼리 파라미터 동기화)
  - [x] 필터 적용 로직
    - [x] 필터 변경 시 API 재호출 (URL 쿼리 파라미터 기반)
    - [x] 필터 조합 처리 (지역 + 타입 + 정렬)

---

### 추가 개발

- [x] 필터 기능 상세 구현
  - [x] `components/tour-filters.tsx` 생성
    - [x] shadcn/ui Select 컴포넌트 설치 및 사용
    - [x] 지역 필터: 시/도 선택 드롭다운 (MapPin 아이콘)
    - [x] 관광 타입 필터: 8가지 타입 선택 드롭다운 (Tag 아이콘)
    - [x] 정렬 옵션: 최신순/이름순 선택 (ArrowUpDown 아이콘)
    - [x] 필터 초기화 버튼 (활성 필터 시 표시)
    - [x] 선택된 필터 뱃지 표시 (지역, 타입)
  - [x] URL 쿼리 파라미터 동기화
    - [x] `useSearchParams`, `useRouter` 사용
    - [x] 필터 변경 시 URL 업데이트 (`?areaCode=1&contentTypeId=12&sort=latest`)
    - [x] "전체" 옵션은 "all" 값 사용 (shadcn/ui Select 제약사항)
    - [x] 필터 변경 시 `pageNo` 자동 리셋
  - [x] `app/page.tsx` 필터 연동
    - [x] Next.js 15 async `searchParams` 처리
    - [x] 지역 코드 목록 조회 (`getAreaCode()`)
    - [x] 필터 파라미터로 관광지 목록 조회 (`getAreaBasedList()`)
    - [x] 정렬 기능 구현 (클라이언트 사이드 정렬)
      - [x] 최신순: `modifiedtime` 기준 내림차순
      - [x] 이름순: `title` 기준 가나다순 (한글 정렬)
  - [x] 스타일링 및 접근성
    - [x] 반응형 디자인 (모바일/데스크톱)
    - [x] Sticky 배치 (상단 고정, `top-16`)
    - [x] ARIA 라벨 추가 (접근성)
    - [x] DESIGN.md 디자인 시스템 반영
  - [x] 오류 수정
    - [x] Select.Item 빈 문자열 오류 해결 ("all" 값 사용)
    - [x] TourCard hydration 오류 해결 (`suppressHydrationWarning` 추가)
- [x] 검색 기능 (MVP 2.3)
  - [x] `components/tour-search.tsx` 생성
    - [x] 검색창 UI (헤더 또는 메인 영역)
    - [x] 검색 아이콘
    - [x] 엔터 또는 버튼 클릭으로 검색
    - [x] 검색 중 로딩 스피너
  - [x] 검색 API 연동
    - [x] `searchKeyword()` 호출
    - [x] 검색 결과 표시
    - [x] 검색 결과 개수 표시
    - [x] 결과 없음 메시지
  - [x] 검색 + 필터 조합
    - [x] 키워드 + 지역 필터
    - [x] 키워드 + 타입 필터
    - [x] 모든 필터 동시 적용
- [x] 네이버 지도 연동 (MVP 2.2)
  - [x] `components/naver-map.tsx` 생성
    - [x] Naver Maps API v3 초기화
    - [x] 지도 컨테이너 설정
    - [x] 초기 중심 좌표 설정
    - [x] 줌 레벨 설정
  - [x] 마커 표시
    - [x] 관광지 목록을 마커로 표시
    - [x] 좌표 변환 (KATEC → WGS84: mapx/mapy / 10000000)
    - [x] 마커 클릭 시 인포윈도우
      - [x] 관광지명
      - [x] 간단한 설명 (주소 표시)
      - [x] "상세보기" 버튼
    - [ ] 관광 타입별 마커 색상 구분 (선택 사항)
  - [x] 지도-리스트 연동
    - [x] 리스트 항목 클릭 → 지도 이동 및 마커 강조
    - [ ] 리스트 항목 호버 → 마커 강조 (선택 사항)
    - [x] 마커 클릭 → 리스트 항목 강조
  - [x] 지도 컨트롤
    - [x] 줌 인/아웃 버튼
    - [x] 지도 유형 선택 (일반/스카이뷰)
    - [ ] 현재 위치 버튼 (선택 사항)
  - [x] 반응형 레이아웃
    - [x] 데스크톱: 리스트(좌측 50%) + 지도(우측 50%) 분할
    - [x] 모바일: 탭 형태로 리스트/지도 전환

---

### 추가 개발

- [x] `components/tour-map-view.tsx` 생성
  - [x] 관광지 목록과 지도를 통합하는 래퍼 컴포넌트
  - [x] 리스트/지도/분할 뷰 모드 전환 기능
  - [x] 선택된 관광지 상태 관리 (양방향 연동)
  - [x] 모바일/데스크톱 자동 감지 및 레이아웃 전환
  - [x] 모바일에서 마커/카드 클릭 시 자동으로 지도 뷰로 전환
- [x] `lib/utils/coordinate.ts` 생성
  - [x] `convertKATECToWGS84()` 함수 구현
  - [x] KATEC 좌표계를 WGS84로 변환 (10000000으로 나누기)
  - [x] 좌표 유효성 검증 (한국 영역 범위 체크)
  - [x] 에러 처리 및 기본값 반환
- [x] `lib/utils/map-utils.ts` 생성
  - [x] `calculateCenterFromTours()` 함수 구현
  - [x] 관광지 목록의 중심 좌표 자동 계산
  - [x] `calculateBoundsFromTours()` 함수 구현 (경계 박스 계산)
  - [x] 유효한 좌표만 필터링하여 계산
- [x] `components/naver-map.tsx` 상세 구현
  - [x] Next.js Script 컴포넌트로 Naver Maps API 동적 로드
  - [x] 스크립트 로드 상태 관리 및 에러 처리
  - [x] 선택된 관광지 마커 강조 (빨간색으로 변경)
  - [x] 인포윈도우 XSS 방지 (HTML 이스케이프 처리)
  - [x] 인포윈도우에 주소 정보 표시
  - [x] 선택된 관광지로 지도 자동 이동 및 줌 조정
  - [x] 지도 컨트롤 UI (줌 인/아웃, 지도 유형 토글 버튼)
  - [x] 로딩 상태 표시 (Loader2 아이콘)
  - [x] API 키 미설정 시 안내 메시지 표시
  - [x] 접근성 개선 (ARIA 라벨 추가)
- [x] `app/page.tsx` 지도 통합
  - [x] TourMapView 컴포넌트 사용하여 목록과 지도 통합 표시
- [x] 페이지네이션
  - [x] 무한 스크롤 구현
    - [x] Intersection Observer 사용
    - [x] 하단 로딩 인디케이터
    - [x] 페이지당 10-20개 항목
  - [ ] 또는 페이지 번호 선택 방식
- [x] 최종 통합 및 스타일링
  - [x] 모든 기능 통합 테스트
  - [x] 반응형 디자인 확인 (모바일/태블릿/데스크톱)
  - [x] 로딩 상태 개선
  - [x] 에러 처리 개선

---

### 추가 개발

- [x] 검색 기능 상세 구현
  - [x] `components/tour-search.tsx` 생성
    - [x] Client Component로 구현 (`"use client"`)
    - [x] 검색창 UI (Input + 검색 아이콘 버튼)
    - [x] 엔터 키 또는 버튼 클릭으로 검색 실행
    - [x] 검색 중 로딩 스피너 표시
    - [x] 검색어 입력 상태 관리
    - [x] URL 쿼리 파라미터와 동기화 (`keyword` 파라미터)
    - [x] 검색어 초기화 기능 (X 버튼)
    - [x] 크기 변형 지원 (small: 헤더용, large: 메인 영역용)
    - [x] shadcn/ui Input 컴포넌트 사용
    - [x] lucide-react Search 아이콘 사용
  - [x] `components/Navbar.tsx`에 헤더 검색창 통합
    - [x] 데스크톱: 헤더 우측에 작은 검색창 배치
    - [x] 모바일: 햄버거 메뉴에 검색창 포함
    - [x] 검색어 입력 시 URL 업데이트 (`?keyword=검색어`)
  - [x] `app/page.tsx`에 메인 영역 검색창 추가
    - [x] Hero Section 아래에 큰 검색창 배치
    - [x] DESIGN.md 디자인 시스템 반영 (rounded-full, shadow-lg)
    - [x] 검색어가 있을 때 검색 결과 개수 표시
  - [x] 검색 API 연동
    - [x] `app/page.tsx`에서 `searchParams`의 `keyword` 파라미터 읽기
    - [x] `keyword`가 있으면 `searchKeyword()` API 호출
    - [x] `keyword`가 없으면 기존 `getAreaBasedList()` 사용
    - [x] 검색 + 필터 조합 지원:
      - [x] 키워드 + 지역 필터 (`searchKeyword({ keyword, areaCode })`)
      - [x] 키워드 + 타입 필터 (`searchKeyword({ keyword, contentTypeId })`)
      - [x] 모든 필터 동시 적용
  - [x] 검색 결과 표시 개선
    - [x] 검색 결과 개수 표시 (예: "검색어" 검색 결과: 15개)
    - [x] 검색 결과 없음 메시지 개선 (검색어 포함)
    - [x] `components/tour-list.tsx`에 `searchKeyword` prop 추가
    - [x] `components/tour-map-view.tsx`에 `searchKeyword` prop 전달
- [x] 무한 스크롤 페이지네이션 상세 구현
  - [x] `hooks/use-infinite-scroll.ts` 생성
    - [x] Intersection Observer API 사용
    - [x] 하단 감지 요소 (sentinel) 감시
    - [x] 다음 페이지 로드 트리거
    - [x] 로딩 상태 관리
    - [x] 에러 상태 관리
    - [x] 페이지 번호 추적
    - [x] rootMargin 설정 (기본값: "100px")
  - [x] API 응답 타입 확장
    - [x] `lib/types/tour.ts`에 `PaginationMetadata`, `PaginationResponse` 타입 추가
    - [x] `lib/api/tour-api.ts`에 페이지네이션 메타데이터 반환 함수 추가:
      - [x] `getAreaBasedListWithPagination()` - 지역 기반 목록 (페이지네이션 메타데이터 포함)
      - [x] `searchKeywordWithPagination()` - 키워드 검색 (페이지네이션 메타데이터 포함)
    - [x] 기존 함수 유지 (하위 호환성)
  - [x] `components/tour-list-infinite.tsx` 생성
    - [x] 무한 스크롤 UI 컴포넌트
    - [x] 하단 감지 요소 (sentinel) 배치
    - [x] 로딩 인디케이터 (하단 스피너)
    - [x] "더 이상 데이터가 없습니다" 메시지
    - [x] Intersection Observer 연결
    - [x] 기존 TourList 컴포넌트 재사용
  - [x] `components/tour-list-container.tsx` 생성
    - [x] 무한 스크롤 로직 처리 Client Component
    - [x] 초기 데이터 표시
    - [x] 무한 스크롤로 추가 페이지 로드
    - [x] 누적된 관광지 목록 관리 (이전 페이지 + 새 페이지)
    - [x] 필터/검색 변경 시 페이지 리셋
    - [x] 정렬 기능 통합 (클라이언트 사이드 정렬)
    - [x] 에러 처리 및 재시도 기능
  - [x] `app/page.tsx`에 무한 스크롤 통합
    - [x] 페이지네이션 메타데이터를 사용하여 초기 데이터 로드
    - [x] `getAreaBasedListWithPagination()` 또는 `searchKeywordWithPagination()` 사용
    - [x] TourListContainer 컴포넌트 사용
  - [x] `components/tour-map-view.tsx`에 무한 스크롤 통합
    - [x] 무한 스크롤 props 추가 (`loadMore`, `hasMore`, `isLoading`, `onRetry`)
    - [x] TourListInfinite 컴포넌트 조건부 렌더링
    - [x] 새 페이지 로드 시 지도 마커 자동 업데이트 (tours prop 변경 시)
    - [x] 선택된 관광지 상태 관리 개선

## Phase 3: 상세페이지 (`/places/[contentId]`)

- [x] 페이지 기본 구조
  - [x] `app/places/[contentId]/page.tsx` 생성
    - [x] 동적 라우팅 설정
    - [x] 뒤로가기 버튼 (헤더)
    - [x] 기본 레이아웃 구조
    - [x] 라우팅 테스트
- [x] 기본 정보 섹션 (MVP 2.4.1)
  - [x] `components/tour-detail/detail-info.tsx` 생성
    - [x] `getDetailCommon()` API 연동
    - [x] 관광지명 (대제목)
    - [x] 대표 이미지 (크게 표시)
    - [x] 주소 표시 및 복사 기능
      - [x] 클립보드 API 사용
      - [x] 복사 완료 토스트
    - [x] 전화번호 (클릭 시 전화 연결)
    - [x] 홈페이지 (링크)
    - [x] 개요 (긴 설명문)
    - [x] 관광 타입 및 카테고리 뱃지
    - [x] 정보 없는 항목 숨김 처리

---

### 추가 개발

- [x] `components/Navbar.tsx` 뒤로가기 버튼 추가
  - [x] 상세페이지(`/places/[contentId]`)일 때만 표시
  - [x] `usePathname()`으로 경로 감지
  - [x] `useRouter().back()`으로 이전 페이지로 이동
  - [x] 모바일/데스크톱 모두 지원
- [x] `app/places/[contentId]/page.tsx` 상세 구현
  - [x] Next.js 15 async params 처리
  - [x] `getDetailCommon()` API 호출 및 에러 처리
  - [x] 404 처리 (`notFound()`)
  - [x] API 에러 처리 (Error 컴포넌트)
  - [x] 로딩 스켈레톤 UI (Suspense)
  - [x] 시맨틱 HTML (`<main>`, `<article>`)
- [x] `components/tour-detail/detail-info.tsx` 상세 구현
  - [x] 대표 이미지 표시 (이미지 없으면 플레이스홀더)
  - [x] 주소 복사 기능 (클립보드 API + HTTPS fallback)
  - [x] 전화번호 `tel:` 링크 (모바일/데스크톱 지원)
  - [x] 홈페이지 외부 링크 (새 창 열기, `rel="noopener noreferrer"`)
  - [x] 개요 HTML 이스케이프 처리 (XSS 방지)
  - [x] 개요 줄바꿈 처리 (`\n` → `<br />`)
  - [x] 관광 타입 뱃지 표시 (기존 함수 재사용)
  - [x] 반응형 디자인 (모바일: 단일 컬럼, 데스크톱: 2컬럼)
  - [x] 접근성 개선 (ARIA 라벨, 시맨틱 HTML, 키보드 포커스)
  - [x] 이미지 로드 실패 처리 (`onError` 핸들러)
- [x] 운영 정보 섹션 (MVP 2.4.2)
  - [x] `components/tour-detail/detail-intro.tsx` 생성
    - [x] `getDetailIntro()` API 연동
    - [x] 운영시간/개장시간
    - [x] 휴무일
    - [x] 이용요금
    - [x] 주차 가능 여부
    - [x] 수용인원
    - [x] 체험 프로그램
    - [x] 유모차/반려동물 동반 가능 여부
    - [x] 정보 없는 항목 숨김 처리

---

### 추가 개발

- [x] `components/tour-detail/detail-intro.tsx` 상세 구현
  - [x] 운영 정보 섹션 컴포넌트 생성
  - [x] 운영시간 표시 (`usetime` 필드)
  - [x] 휴무일 표시 (`restdate` 필드)
  - [x] 문의처 표시 (`infocenter` 필드)
  - [x] 이용요금 표시 (`infotext` 필드 - 타입별 필드 확인 필요)
  - [x] 주차 가능 여부 표시 (`parking` 필드)
  - [x] 수용인원 표시 (`accomcount` 필드)
  - [x] 체험 프로그램 표시 (`expguide` 필드)
  - [x] 유모차 동반 가능 여부 표시 (`chkbabycarriage` 필드)
  - [x] 반려동물 동반 가능 여부 표시 (`chkpet` 필드)
  - [x] 정보 없는 항목 숨김 처리 (조건부 렌더링)
  - [x] 아이콘 사용 (Clock, Calendar, Phone, DollarSign, Car, Users, Sparkles, Baby, Dog)
  - [x] 반응형 디자인 (모바일/데스크톱)
  - [x] 접근성 개선 (ARIA 라벨, 시맨틱 HTML)
  - [x] 카드 형태 레이아웃 (DESIGN.md 디자인 시스템 반영)
- [x] `app/places/[contentId]/page.tsx` 운영 정보 섹션 통합
  - [x] `getDetailIntro()` API 호출 추가
  - [x] `contentTypeId`는 `getDetailCommon()`에서 가져온 값 사용
  - [x] 운영 정보 조회 실패 시에도 기본 정보는 표시 (선택적 섹션)
  - [x] DetailIntro 컴포넌트를 DetailInfo 아래에 배치
  - [x] 에러 처리 (운영 정보 없어도 기본 정보는 표시)
- [x] 이미지 갤러리 (MVP 2.4.3)
  - [x] `components/tour-detail/detail-gallery.tsx` 생성
    - [x] `getDetailImage()` API 연동
    - [x] 대표 이미지 + 서브 이미지들
    - [x] 이미지 슬라이드 기능 (Swiper 또는 캐러셀)
    - [x] 이미지 클릭 시 전체화면 모달
    - [x] 이미지 없으면 기본 이미지
    - [x] Next.js Image 컴포넌트 사용 (최적화)
- [x] 지도 섹션 (MVP 2.4.4)

  - [x] `components/tour-detail/detail-map.tsx` 생성
    - [x] 해당 관광지 위치 표시
    - [x] 마커 1개 표시
    - [x] "길찾기" 버튼
      - [x] 네이버 지도 앱/웹 연동
      - [x] URL: `https://map.naver.com/v5/directions/{좌표}`
    - [x] 좌표 정보 표시 (선택 사항)

- [x] 공유 기능 (MVP 2.4.5)
  - [x] `components/tour-detail/share-button.tsx` 생성
    - [x] URL 복사 기능
      - [x] `navigator.clipboard.writeText()` 사용
      - [x] HTTPS 환경 확인
    - [x] 복사 완료 토스트 메시지
    - [x] 공유 아이콘 버튼 (Share/Link 아이콘)
  - [x] Open Graph 메타태그
    - [x] `app/places/[contentId]/page.tsx`에 Metadata 생성
    - [x] `og:title` - 관광지명
    - [x] `og:description` - 관광지 설명 (100자 이내)
    - [x] `og:image` - 대표 이미지 (1200x630 권장)
    - [x] `og:url` - 상세페이지 URL
    - [x] `og:type` - "website"
- [x] 북마크 기능 (MVP 2.4.5)
  - [x] `components/bookmarks/bookmark-button.tsx` 생성
    - [x] 별 아이콘 (채워짐/비어있음)
    - [x] 북마크 상태 확인 (Supabase 조회)
    - [x] 북마크 추가/제거 기능
    - [x] 인증된 사용자 확인 (Clerk)
    - [x] 로그인하지 않은 경우: 로그인 유도 또는 localStorage 임시 저장
  - [x] Supabase 연동
    - [x] `lib/api/supabase-api.ts` 생성
      - [x] `getBookmark()` - 북마크 조회
      - [x] `addBookmark()` - 북마크 추가
      - [x] `removeBookmark()` - 북마크 제거
      - [x] `getUserBookmarks()` - 사용자 북마크 목록
    - [x] `bookmarks` 테이블 사용 (db.sql 참고)
      - [x] `user_id` (users 테이블 참조)
      - [x] `content_id` (한국관광공사 API contentid)
      - [x] UNIQUE 제약 (user_id, content_id)
  - [x] 상세페이지에 북마크 버튼 추가
- [x] 반려동물 정보 섹션 (MVP 2.5)
  - [x] `components/tour-detail/detail-pet-tour.tsx` 생성
    - [x] `getDetailPetTour()` API 연동
    - [x] 반려동물 동반 가능 여부 표시
    - [x] 반려동물 크기 제한 정보
    - [x] 반려동물 입장 가능 장소 (실내/실외)
    - [x] 반려동물 동반 추가 요금
    - [x] 반려동물 전용 시설 정보
    - [x] 아이콘 및 뱃지 디자인 (🐾)
    - [x] 주의사항 강조 표시
  - [x] `app/places/[contentId]/page.tsx`에 반려동물 정보 섹션 통합
    - [x] `getDetailPetTour()` API 호출 추가 (선택적, 에러 무시)
    - [x] DetailPetTour 컴포넌트를 DetailMap 아래에 배치
- [x] 추천 관광지 섹션 (선택 사항)
  - [x] `components/tour-detail/detail-recommendations.tsx` 생성
    - [x] 같은 타입의 다른 관광지 추천
    - [x] 현재 관광지 제외
    - [x] 최대 6개 추천 (카드 형태)
    - [x] 기존 TourCard 컴포넌트 재사용
    - [x] 로딩 상태 (Skeleton UI)
    - [x] 빈 상태 처리
  - [x] `app/places/[contentId]/page.tsx`에 추천 관광지 섹션 통합
    - [x] DetailRecommendations 컴포넌트를 페이지 하단에 배치
- [x] 최종 통합 및 스타일링
  - [x] 모든 섹션 통합 (DetailInfo → DetailIntro → DetailGallery → DetailMap → DetailPetTour → DetailRecommendations)
  - [x] 반응형 디자인 확인 (모든 섹션 `container max-w-7xl mx-auto px-4 py-8` 스타일 적용)
  - [x] 모바일 최적화 (그리드 레이아웃: `grid-cols-1 sm:grid-cols-2 lg:grid-cols-3`)
  - [x] 접근성 확인 (ARIA 라벨, 키보드 네비게이션)

## Phase 4: 통계 대시보드 페이지 (`/stats`)

- [ ] 페이지 기본 구조
  - [ ] `app/stats/page.tsx` 생성
    - [ ] 기본 레이아웃 구조
    - [ ] 반응형 레이아웃 설정 (모바일 우선)
    - [ ] Server Component로 구현
- [ ] 통계 데이터 수집
  - [ ] `lib/api/stats-api.ts` 생성
    - [ ] `getRegionStats()` - 지역별 관광지 개수 집계
      - [ ] `areaBasedList2` API로 각 지역별 totalCount 조회
      - [ ] 지역 코드별로 API 호출
    - [ ] `getTypeStats()` - 타입별 관광지 개수 집계
      - [ ] `areaBasedList2` API로 각 타입별 totalCount 조회
      - [ ] contentTypeId별로 API 호출
    - [ ] `getStatsSummary()` - 전체 통계 요약
      - [ ] 전체 관광지 수
      - [ ] Top 3 지역
      - [ ] Top 3 타입
      - [ ] 마지막 업데이트 시간
    - [ ] 병렬 API 호출로 성능 최적화
    - [ ] 에러 처리 및 재시도 로직
    - [ ] 데이터 캐싱 (revalidate: 3600)
- [ ] 통계 요약 카드
  - [ ] `components/stats/stats-summary.tsx` 생성
    - [ ] 전체 관광지 수 표시
    - [ ] Top 3 지역 표시 (카드 형태)
    - [ ] Top 3 타입 표시 (카드 형태)
    - [ ] 마지막 업데이트 시간 표시
    - [ ] 로딩 상태 (Skeleton UI)
    - [ ] 카드 레이아웃 디자인
- [ ] 지역별 분포 차트 (Bar Chart)
  - [ ] `components/stats/region-chart.tsx` 생성
    - [ ] shadcn/ui Chart 컴포넌트 설치 (Bar)
    - [ ] recharts 기반 Bar Chart 구현
    - [ ] X축: 지역명 (서울, 부산, 제주 등)
    - [ ] Y축: 관광지 개수
    - [ ] 상위 10개 지역 표시 (또는 전체)
    - [ ] 바 클릭 시 해당 지역 목록 페이지로 이동
    - [ ] 호버 시 정확한 개수 표시
    - [ ] 다크/라이트 모드 지원
    - [ ] 반응형 디자인
    - [ ] 로딩 상태
    - [ ] 접근성 (ARIA 라벨, 키보드 네비게이션)
- [ ] 타입별 분포 차트 (Donut Chart)
  - [ ] `components/stats/type-chart.tsx` 생성
    - [ ] shadcn/ui Chart 컴포넌트 설치 (Pie/Donut)
    - [ ] recharts 기반 Donut Chart 구현
    - [ ] 타입별 비율 (백분율)
    - [ ] 타입별 개수 표시
    - [ ] 섹션 클릭 시 해당 타입 목록 페이지로 이동
    - [ ] 호버 시 타입명, 개수, 비율 표시
    - [ ] 다크/라이트 모드 지원
    - [ ] 반응형 디자인
    - [ ] 로딩 상태
    - [ ] 접근성 (ARIA 라벨)
- [ ] 페이지 통합
  - [ ] `app/stats/page.tsx`에 모든 컴포넌트 통합
    - [ ] 통계 요약 카드 (상단)
    - [ ] 지역별 분포 차트 (중단)
    - [ ] 타입별 분포 차트 (하단)
  - [ ] 에러 처리 (에러 메시지 + 재시도 버튼)
  - [ ] 네비게이션에 통계 페이지 링크 추가
  - [ ] 최종 페이지 확인

## Phase 5: 북마크 페이지 (`/bookmarks`) - 선택 사항

- [ ] Supabase 설정 확인
  - [ ] `bookmarks` 테이블 확인 (db.sql 참고)
    - [ ] `users` 테이블과의 관계 확인
    - [ ] 인덱스 확인 (user_id, content_id, created_at)
    - [ ] RLS 비활성화 확인 (개발 환경)
- [ ] 북마크 목록 페이지
  - [ ] `app/bookmarks/page.tsx` 생성
    - [ ] 인증된 사용자만 접근 가능
    - [ ] 로그인하지 않은 경우 로그인 유도
  - [ ] `components/bookmarks/bookmark-list.tsx` 생성
    - [ ] 사용자 북마크 목록 조회 (`getUserBookmarks()`)
    - [ ] 카드 레이아웃 (홈페이지와 동일한 tour-card 사용)
    - [ ] 빈 상태 처리 (북마크 없을 때)
    - [ ] 로딩 상태 (Skeleton UI)
- [ ] 북마크 관리 기능
  - [ ] 정렬 옵션
    - [ ] 최신순 (created_at DESC)
    - [ ] 이름순 (가나다순)
    - [ ] 지역별
  - [ ] 일괄 삭제 기능
    - [ ] 체크박스 선택
    - [ ] 선택 항목 삭제
    - [ ] 확인 다이얼로그
  - [ ] 개별 삭제 기능
    - [ ] 각 카드에 삭제 버튼
- [ ] 페이지 통합 및 스타일링
  - [ ] 반응형 디자인 확인
  - [ ] 최종 페이지 확인

## Phase 6: 최적화 & 배포

- [ ] 이미지 최적화
  - [ ] `next.config.ts` 외부 도메인 설정
    - [ ] 한국관광공사 이미지 도메인 추가
    - [ ] 네이버 지도 이미지 도메인 추가
  - [ ] Next.js Image 컴포넌트 사용 확인
    - [ ] priority 속성 (above-the-fold)
    - [ ] lazy loading (below-the-fold)
    - [ ] responsive sizes 설정
- [ ] 전역 에러 핸들링
  - [ ] `app/error.tsx` 생성
  - [ ] `app/global-error.tsx` 생성
  - [ ] API 에러 처리 개선
- [ ] 404 페이지
  - [ ] `app/not-found.tsx` 생성
    - [ ] 사용자 친화적인 메시지
    - [ ] 홈으로 돌아가기 버튼
- [ ] SEO 최적화
  - [ ] 메타태그 설정 (`app/layout.tsx`)
    - [ ] 기본 title, description
    - [ ] Open Graph 태그
    - [ ] Twitter Card 태그
  - [ ] `app/sitemap.ts` 생성
    - [ ] 동적 sitemap 생성 (관광지 상세페이지 포함)
  - [ ] `app/robots.ts` 생성
- [ ] 성능 최적화
  - [ ] Lighthouse 점수 측정 (목표: > 80)
  - [ ] 코드 분할 확인
  - [ ] 불필요한 번들 제거
  - [ ] API 응답 캐싱 전략 확인
- [ ] 환경변수 보안 검증
  - [ ] 모든 필수 환경변수 확인
  - [ ] `.env.example` 업데이트
  - [ ] 프로덕션 환경변수 설정 가이드 작성
- [ ] 배포 준비
  - [ ] Vercel 배포 설정
  - [ ] 환경변수 설정 (Vercel 대시보드)
  - [ ] 빌드 테스트 (`pnpm build`)
  - [ ] 프로덕션 배포 및 테스트

## 추가 작업 (선택 사항)

- [ ] 다크 모드 지원
  - [ ] 테마 전환 기능
  - [ ] 모든 컴포넌트 다크 모드 스타일 적용
- [ ] PWA 지원
  - [ ] `app/manifest.ts` 생성
  - [ ] Service Worker 설정
  - [ ] 오프라인 지원
- [ ] 접근성 개선
  - [ ] ARIA 라벨 추가
  - [ ] 키보드 네비게이션 개선
  - [ ] 색상 대비 확인 (WCAG AA)
- [ ] 성능 모니터링
  - [ ] Web Vitals 측정
  - [ ] 에러 로깅 (Sentry 등)
- [ ] 사용자 피드백
  - [ ] 피드백 수집 기능
  - [ ] 버그 리포트 기능
